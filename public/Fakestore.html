<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FakeStore | E-Commerce</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">

<style>
:root{
  --primary:#2563eb;
  --card:#ffffff;
}

body{
  background:linear-gradient(180deg,#f8fafc,#eef2ff);
  font-family:"Segoe UI",sans-serif;
  padding-bottom:60px;
}

/* HEADER */
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:#fff;
  border-bottom:1px solid #e5e7eb;
}

/* SEARCH */
#searchBox{
  border-radius:999px;
}

/* PRODUCT CARD */
.product-card{
  background:var(--card);
  border-radius:16px;
  border:1px solid #e5e7eb;
  transition:.35s;
  height:100%;
}
.product-card:hover{
  transform:translateY(-6px);
  box-shadow:0 18px 40px rgba(0,0,0,.12);
}

.product-img{
  height:180px;
  object-fit:contain;
  padding:16px;
  background:#f8fafc;
  border-radius:12px;
}

/* WISHLIST */
.wishlist{
  position:absolute;
  top:10px;
  right:10px;
  font-size:18px;
  cursor:pointer;
  color:#94a3b8;
  background:#fff;
  border-radius:50%;
  padding:6px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
}
.wishlist.active{color:#ef4444}

/* SIDEBAR */
.category-box{
  background:#fff;
  border-radius:16px;
  padding:16px;
  box-shadow:0 8px 24px rgba(0,0,0,.08);
}

/* CART */
.qty-btn{
  width:30px;
  height:30px;
  border-radius:50%;
}

/* MOBILE NAV */
.mobile-nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#fff;
  border-top:1px solid #e5e7eb;
  display:flex;
  justify-content:space-around;
  padding:8px 0;
  z-index:2000;
}
.mobile-nav button{
  background:none;
  border:none;
  font-size:12px;
  color:#64748b;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.mobile-nav i{font-size:20px}

@media(min-width:768px){
  .mobile-nav{display:none}
}
.product-card:hover{
  transform:translateY(-6px);
  box-shadow:0 18px 40px rgba(0,0,0,.12);
}

</style>
</head>

<body onload="init()">

<!-- HEADER -->
<header class="p-3 d-flex align-items-center gap-2">
    
  <h5 class="m-0 flex-grow-1">
    <button class="btn btn-link p-0 fw-bold text-decoration-none"
            onclick="goHome()">üõí FakeStore</button>
  </h5>

  <input id="searchBox" onkeyup="searchProducts()"
         class="form-control w-50" placeholder="Search products">

  <button class="btn position-relative" onclick="showWishlist()">
    ‚ù§Ô∏è
    <span id="wishCount"
      class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
  </button>

  <button class="btn position-relative"
          data-bs-toggle="modal"
          data-bs-target="#cartModal"
          onclick="renderCart()">
    <i class="bi bi-cart4 fs-5"></i>
    <span id="cartCount"
      class="badge bg-danger position-absolute top-0 start-100 translate-middle">0</span>
  </button>
  <a href="orders.html" class="btn btn-outline-secondary btn-sm">Orders</a>

</header>

<!-- BREADCRUMB -->
<nav class="container-fluid mt-2">
  <ol class="breadcrumb small" id="breadcrumb">
    <li class="breadcrumb-item active">Home</li>
  </ol>
</nav>

<section class="container-fluid mt-3">
<div class="row">

<nav class="col-md-3 col-lg-2">
  <div class="category-box">
    <label class="fw-bold mb-2">Category</label>
    <select id="categories" class="form-select" onchange="filterCategory()"></select>
  </div>
</nav>

<main class="col-md-9 col-lg-10">
  <div class="row g-4" id="products"></div>
</main>

</div>
</section>

<!-- CART MODAL -->
<div class="modal fade" id="cartModal">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content rounded-4">
<div class="modal-header">
<h5>üßæ Order Summary</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<table class="table align-middle">
<thead>
<tr><th>Item</th><th>Qty</th><th>Price</th></tr>
</thead>
<tbody id="cartBody"></tbody>
</table>
<div class="d-flex justify-content-between fw-bold fs-5">
<span>Total</span><span id="total">‚Çπ0</span>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-success w-100" onclick="checkout()">üí≥ Pay Securely</button>
</div>
</div>
</div>
</div>

<!-- PRODUCT DETAIL MODAL -->
<div class="modal fade" id="productModal">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content rounded-4">
<div class="modal-header">
<h5 id="pdTitle"></h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body row g-4">
<div class="col-md-5 text-center">
<img id="pdImage" class="img-fluid" style="max-height:300px">
</div>
<div class="col-md-7">
<p id="pdDesc" class="text-muted"></p>
<h4 id="pdPrice" class="text-primary"></h4>
<p id="pdRating"></p>
<button class="btn btn-dark w-100" id="pdAddBtn">
<i class="bi bi-cart-plus"></i> Add to Cart
</button>
</div>
</div>
</div>
</div>
</div>

<!-- MOBILE NAV -->
<nav class="mobile-nav">
<button onclick="goHome()"><i class="bi bi-house"></i><span>Home</span></button>
<button onclick="showWishlist()"><i class="bi bi-heart"></i><span>Wish</span></button>
<button data-bs-toggle="modal" data-bs-target="#cartModal" onclick="renderCart()">
<i class="bi bi-cart"></i><span>Cart</span>
</button>
</nav>
<footer class="text-center small text-muted mt-5">
¬© 2025 FakeStore | Demo Project
</footer>


<script>
let allProducts=[], cart=[], wishlist=[];

/* INIT */
function init(){
  cart=JSON.parse(localStorage.getItem("cart"))||[];
  wishlist=JSON.parse(localStorage.getItem("wishlist"))||[];
  updateCounts();
  loadCategories();
  loadProducts();
  updateBreadcrumb(["Home"]);
}

/* BREADCRUMB */
function updateBreadcrumb(path){
  breadcrumb.innerHTML="";
  path.forEach((p,i)=>{
    breadcrumb.innerHTML+=`
      <li class="breadcrumb-item ${i===path.length-1?"active":""}">${p}</li>`;
  });
}

/* LOAD */
function loadCategories(){
  fetch("https://fakestoreapi.com/products/categories")
  .then(r=>r.json())
  .then(c=>{
    categories.innerHTML='<option value="all">ALL</option>';
    c.forEach(x=>categories.innerHTML+=`<option value="${x}">${x.toUpperCase()}</option>`);
  });
}
function loadProducts(url="https://fakestoreapi.com/products"){
  fetch(url).then(r=>r.json()).then(d=>{
    allProducts=d;
    renderProducts(d);
  });
}

/* RENDER */
function renderProducts(items){
  products.innerHTML="";
  items.forEach(p=>{
    const liked=wishlist.some(w=>w.id===p.id);
    products.innerHTML+=`
    <div class="col-6 col-md-4 col-lg-3">
      <div class="card product-card p-2 position-relative">
        <i class="bi bi-heart-fill wishlist ${liked?"active":""}"
           onclick="toggleWishlist(${p.id})"></i>
        <img src="${p.image}" class="product-img" onclick="openProductDetail(${p.id})">
        <div class="card-body">
          <h6>${p.title.slice(0,40)}...</h6>
          <p class="fw-bold text-primary">‚Çπ ${p.price}</p>
          <p class="small">${p.rating.rate} ‚≠ê (${p.rating.count})</p>
        </div>
        <div class="card-footer bg-transparent border-0">
          <button class="btn btn-dark w-100" onclick="addToCart(${p.id})">Add</button>
        </div>
      </div>
    </div>`;
  });
}

/* SEARCH */
function searchProducts(){
  updateBreadcrumb(["Home","Search"]);
  renderProducts(
    allProducts.filter(p =>
      p.title.toLowerCase().includes(searchBox.value.toLowerCase())
    )
  );
}

/* CATEGORY */
function filterCategory(){
  const c=categories.value;
  updateBreadcrumb(["Home",c.toUpperCase()]);
  c==="all"?loadProducts():loadProducts(`https://fakestoreapi.com/products/category/${c}`);
}

/* CART */
function addToCart(id){
  const i=cart.find(x=>x.id===id);
  if(i)i.qty++;
  else cart.push({...allProducts.find(p=>p.id===id),qty:1});
  saveCart();
}
function renderCart(){
  cartBody.innerHTML="";
  let t=0;
  cart.forEach(i=>{
    t+=i.price*i.qty;
    cartBody.innerHTML+=`
    <tr>
      <td>${i.title.slice(0,30)}...</td>
      <td>
        <button class="btn btn-sm btn-outline-secondary qty-btn" onclick="updateQty(${i.id},-1)">‚àí</button>
        ${i.qty}
        <button class="btn btn-sm btn-outline-secondary qty-btn" onclick="updateQty(${i.id},1)">+</button>
      </td>
      <td>‚Çπ ${(i.price*i.qty).toFixed(2)}</td>
    </tr>`;
  });
  total.innerText="‚Çπ "+t.toFixed(2);
}
function updateQty(id,c){
  const i=cart.find(x=>x.id===id);
  i.qty+=c;
  if(i.qty<=0)cart=cart.filter(x=>x.id!==id);
  saveCart();
  renderCart();
}
function saveCart(){
  localStorage.setItem("cart",JSON.stringify(cart));
  updateCounts();
}
function updateCounts(){
  cartCount.innerText=cart.reduce((s,i)=>s+i.qty,0);
  wishCount.innerText=wishlist.length;
}

/* WISHLIST */
function toggleWishlist(id){
  const i=wishlist.findIndex(w=>w.id===id);
  i===-1?wishlist.push(allProducts.find(p=>p.id===id)):wishlist.splice(i,1);
  localStorage.setItem("wishlist",JSON.stringify(wishlist));
  updateCounts();
  renderProducts(allProducts);
}
function showWishlist(){
  updateBreadcrumb(["Home","Wishlist"]);
  renderProducts(wishlist);
}

/* PRODUCT DETAIL */
function openProductDetail(id){
  const p=allProducts.find(p=>p.id===id);
  pdTitle.innerText=p.title;
  pdImage.src=p.image;
  pdDesc.innerText=p.description;
  pdPrice.innerText="‚Çπ "+p.price;
  pdRating.innerHTML=`${p.rating.rate} ‚≠ê (${p.rating.count})`;
  pdAddBtn.onclick=()=>addToCart(p.id);
  new bootstrap.Modal(productModal).show();
}

/* CHECKOUT */
function checkout(){
  if(cart.length === 0) return;

  const orders = JSON.parse(localStorage.getItem("orders")) || [];

  const newOrder = {
    orderId: "ORD-" + Date.now(),
    date: new Date().toLocaleString(),
    items: [...cart],
    total: cart.reduce((s,i)=>s + i.price * i.qty, 0),
    status: "Placed"
  };

  orders.unshift(newOrder);
  localStorage.setItem("orders", JSON.stringify(orders));

  alert("‚úÖ Order Placed Successfully");

  cart = [];
  saveCart();
  bootstrap.Modal.getInstance(cartModal).hide();
}


/* HOME */
function goHome(){
  searchBox.value="";
  categories.value="all";
  updateBreadcrumb(["Home"]);
  renderProducts(allProducts);
  window.scrollTo({top:0,behavior:"smooth"});
}

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
